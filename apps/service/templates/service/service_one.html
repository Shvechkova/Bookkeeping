{% extends "core/base.html" %}
{% load category_service %}
{% load convert_list_to_string  %}

{% block content %}
{% include "service/includes/service_menu.html" %}
{% include "service/includes/modal/add_contract_new.html" %}
<input type="hidden" id="page_name" value="{{ title }}" />
<input type="hidden" id="page_name_abc" value="{{ title_name }}" />

<div class="open-modal btn_month_bill" data-name="modal-add-bill" data-cat-service="{{ title }}">+</div>  

<div class="bill-sorting-date" data-sort-month="1" bill-sorting-date="1">
    <h3>Период</h3>
    <div class = "btn_sorting_month" data-sort-month="1">Сейчас</div>
    <div class = "btn_sorting_month" data-sort-month="2">Прошлый месяц</div>
    <div class = "btn_sorting_month" data-sort-month="3">3 месяца</div>
    <div class = "btn_sorting_month" data-sort-month="12">Год</div>
    <div class = "btn_sorting_month" data-sort-month="999">Все время</div>
  </div>


{% comment %} {% for month, service_month_invoices in service_month_invoice %}
<h3>{{ month }}</h3>
    {% for service_month in service_month_invoice %}
        {{service_month}}
    {% endfor %}

{% endfor %} {% endcomment %}
 <section class="bill-month">
{% for date_invoice, service_month_invoices in service_month_invoice %}
    <div class="bill_month_one-wrap">
        <h3 class="bill_month-title">{{date_invoice|join:" " }}</h3>
        <div class="invoice_month">
            {% for service_month_invoices in service_month_invoices %}
            <div class="invoice_month_line">
            <div class="invoice_month_counter invoice_wrap">
                
                {% if forloop.first %}
                <div class="invoice_month_title">&nbsp;</div>
                {% endif %}
                <div class="invoice_month_item">{% if forloop.counter < 9 %}0{% endif %}{{forloop.counter}}.</div>
                
            </div>
            <div class="invoice_month_client_name invoice_wrap">
                {% if forloop.first %}
                <div class="invoice_month_title">Клиент</div>
                {% endif %}
                <div class="invoice_month_item">{{service_month_invoices.client.name}}</div>
            </div>
            <div class="invoice_month_contract_name invoice_wrap">
                {% if forloop.first %}
                <div class="invoice_month_title">Договор
                      

                </div>
              
                {% endif %}
                <div class="invoice_month_item">{{service_month_invoices.contract.contract_number}}</div>
            </div>
            <div class="invoice_month_summ_invoce invoice_wrap">
                {% if forloop.first %}
                <div class="invoice_month_title">Счёт</div>
                {% comment %} <div class="open-modal btn_month_bill" data-name="modal-add-bill" data-cat-service="{{ title }}" >+</div> {% endcomment %}
                {% endif %}
                <div class="invoice_month_item">{{service_month_invoices.contract_sum}}</div>
            </div>
            <div class="invoice_month_summ_adv invoice_wrap">
                
            </div>
            {% comment %} <div class="invoice_month_suborder">

            </div> {% endcomment %}
            <div class="invoice_month_in invoice_wrap invoice_wrap_len 
            {% if forloop.first %}bg_green_round_first{% else %}bg_green{% endif %}
            {% if  forloop.last %}bg_green_round_last{% else %}bg_green{% endif %}
             ">
                <div class="invoice_month_in_main">
                    {% if forloop.first %}
                    <div class="invoice_month_title">Приход</div>
                    {% endif %}
                    <div class="invoice_month_item">0</div>
                </div>
                <div class="invoice_month_in_additional">
                    {% if forloop.first %}
                    <div class="invoice_month_title">ИП</div>
                    {% endif %}
                    <div class="invoice_month_item">0</div>
                </div>
                <div class="invoice_month_in_additional">
                    {% if forloop.first %}
                    <div class="invoice_month_title">OOO</div>
                    {% endif %}
                    <div class="invoice_month_item">0</div>
                </div>
                <div class="invoice_month_in_additional">
                    {% if forloop.first %}
                    <div class="invoice_month_title">$</div>
                    {% endif %}
                    <div class="invoice_month_item">0</div>
                </div>
            </div>
             <div class="invoice_month_out invoice_wrap invoice_wrap_len 
             {% if forloop.first %}bg_red_round_first {% else %}bg_red{% endif %}
              {% if  forloop.last %}bg_red_round_last{% else %}bg_red{% endif %}
             ">
                <div class="invoice_month_out_main">
                    {% if forloop.first %}
                    <div class="invoice_month_title">Расход
                    <div class="btn_month_invoce-shrink" data-attr-shrink='invoice_month_out_additional_{{date_invoice|join:"_"}}'>
                      <svg width="16"
                           height="16"
                           viewBox="0 0 16 16"
                           fill="none"
                           xmlns="http://www.w3.org/2000/svg">
                        <rect x="16.0002" y="16" width="16" height="16" rx="8" transform="rotate(-180 16.0002 16)" fill="black" />
                        <rect x="13.0002" y="9" width="10" height="2" transform="rotate(-180 13.0002 9)" fill="white" />
                        <path d="M7.00024 3L7.00024 5.5L4.50024 8L7.00024 10.5V13L2.00024 8L7.00024 3Z" fill="white" />
                      </svg>
                    </div>
                </div>
                    {% endif %}
                    <div class="invoice_month_item">0</div>
                </div>
                <div class="invoice_month_out_additional invoice_month_out_additional_{{date_invoice|join:"_"}}"data-attr-shrink-item='invoice_month_out_additional_{{date_invoice|join:"_"}}'>
                    {% if forloop.first %}
                    <div class="invoice_month_title">ИП</div>
                    {% endif %}
                    <div class="invoice_month_item">0</div>
                </div>
                <div class="invoice_month_out_additional invoice_month_out_additional_{{date_invoice|join:"_"}}"data-attr-shrink-item='invoice_month_out_additional_{{date_invoice|join:"_"}}'>
                    {% if forloop.first %}
                    <div class="invoice_month_title">OOO</div>
                    {% endif %}
                    <div class="invoice_month_item">0</div>
                </div>
                <div class="invoice_month_out_additional invoice_month_out_additional_{{date_invoice|join:"_"}}"data-attr-shrink-item='invoice_month_out_additional_{{date_invoice|join:"_"}}'>
                    {% if forloop.first %}
                    <div class="invoice_month_title">$</div>
                    {% endif %}
                    <div class="invoice_month_item">0</div>
                </div>

            </div>
            </div>
            {% endfor %}
        </div>

    </div>
{% endfor %}
</div>


{% endblock content %}